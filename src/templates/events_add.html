{% extends "base.html" %}
{% block title %}Add New Event{% endblock %}
{% block content %}
  <h1>‚ûï Add New Event</h1>
  <a href="/events" class="button">‚Üê Back to Events</a>

  <div class="card">
    <form method="post" action="/events/save" enctype="multipart/form-data">
      <div class="form-group">
        <label for="title">Event Title:</label>
        <input type="text" id="title" name="title" required placeholder="e.g., –ö–∏–Ω–æ–∫–ª—É–±: Inception" title="Public name of the event shown to users">
        <small class="muted">Keep it short and descriptive. Emojis are supported.</small>
      </div>

      <div class="form-group">
        <label for="when">Date & Time:</label>
        <input type="datetime-local" id="when" name="when" required title="Local date and time when the event starts">
        <small class="muted">Set in your local timezone. Users will see local time in the bot.</small>
      </div>

      <div class="form-group">
        <label for="place">Location:</label>
        <input type="text" id="place" name="place" list="locs" required placeholder="e.g., IJsbaanpad 9" title="Address or venue name where the event is held">
        <datalist id="locs">
          {% for s in locs %}<option value="{{ s }}">{% endfor %}
        </datalist>
        <small class="muted">Pick from suggestions or type a new address.</small>
      </div>

      <div class="form-group">
        <label for="price">Price:</label>
        <input type="number" id="price" name="price" step="0.01" placeholder="15.00" title="Ticket price in your default currency">
        <small class="muted">Leave empty for free events.</small>
      </div>

      <div class="form-group">
        <label for="description">Description (optional):</label>
        <textarea id="description" name="description" rows="4" placeholder="Additional event details..." title="Extra details users will see in the bot"></textarea>
        <small class="muted">Add speaker info, agenda, languages, or any special notes.</small>
      </div>

      <div class="form-group">
        <label for="photo">Event Photo (optional):</label>
        <input type="file" id="photo" name="photo" accept="image/*" title="Upload an image to show in the bot and web">
        <small class="muted">Accepted: JPG, PNG, WEBP. Up to 10 MB.</small>
      </div>

      <button type="submit" class="button success" title="Save this event">üíæ Save Event</button>
      <a href="/events" class="button" title="Discard changes and go back">Cancel</a>
    </form>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const tomorrow = new Date();
      tomorrow.setDate(tomorrow.getDate() + 1);
      tomorrow.setHours(19, 0, 0, 0);
      const el = document.getElementById('when');
      if (el) {
        const pad = (n) => String(n).padStart(2, '0');
        const y = tomorrow.getFullYear();
        const m = pad(tomorrow.getMonth() + 1);
        const d = pad(tomorrow.getDate());
        const hh = pad(tomorrow.getHours());
        const mm = pad(tomorrow.getMinutes());
        el.value = `${y}-${m}-${d}T${hh}:${mm}`;
      }
    });
  </script>
{% endblock %}
